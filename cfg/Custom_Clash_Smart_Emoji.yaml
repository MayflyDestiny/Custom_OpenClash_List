# ========================
# Name: Custom_Clash_Smart_Emoji  
# Designer: MayflyDestiny
# version: v1-20260103
# Date: 2026-01-03
# ========================

# ==================== ä»£ç†æä¾›è€… ====================
# æ³¨æ„ï¼šè¯·æä¾›æ‚¨çš„æœºåœºè®¢é˜…é“¾æ¥ï¼Œå¹¶ä¸ºæ¯ä¸ªæœºåœºå‘½å
proxy-providers:
  è®¢é˜…æºåç§°:
    type: http
    interval: 86400
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 300
    proxy: "ğŸŸ¢ ç›´è¿"
    url: è®¢é˜…æºåœ°å€

proxies:
- name: "ğŸŸ¢ ç›´è¿"
  type: direct
  udp: true
- name: "âŒ æ‹’ç»"
  type: reject
  udp: true

# ========================
# ç­–ç•¥ç»„å®šä¹‰
# ========================
pr: &pr {type: select, proxies: [ğŸŸ¢ ç›´è¿, ğŸš€ åˆ†ç»„é€‰æ‹©, ğŸ”¯ é¦™æ¸¯-æ•…è½¬, ğŸ”¯ å°æ¹¾-æ•…è½¬, ğŸ”¯ æ—¥æœ¬-æ•…è½¬, ğŸ”¯ ç¾å›½-æ•…è½¬, â™»ï¸ é¦™æ¸¯-æ™ºé€‰, â™»ï¸ å°æ¹¾-æ™ºé€‰, â™»ï¸ æ—¥æœ¬-æ™ºé€‰, â™»ï¸ ç¾å›½-æ™ºé€‰, â™»ï¸ æ‰€æœ‰-æ™ºé€‰, ğŸ‡­ğŸ‡° é¦™æ¸¯-æ‰‹é€‰, ğŸ‡¹ğŸ‡¼ å°æ¹¾-æ‰‹é€‰, ğŸ‡¯ğŸ‡µ æ—¥æœ¬-æ‰‹é€‰, ğŸ‡ºğŸ‡² ç¾å›½-æ‰‹é€‰, ğŸŒ æ‰€æœ‰-èŠ‚ç‚¹]}

proxy-groups:
  - {name: ğŸš€ åˆ†ç»„é€‰æ‹©, type: select, proxies: [ğŸ”¯ é¦™æ¸¯-æ•…è½¬, ğŸ”¯ å°æ¹¾-æ•…è½¬, ğŸ”¯ æ—¥æœ¬-æ•…è½¬, ğŸ”¯ ç¾å›½-æ•…è½¬, â™»ï¸ é¦™æ¸¯-æ™ºé€‰, â™»ï¸ å°æ¹¾-æ™ºé€‰, â™»ï¸ æ—¥æœ¬-æ™ºé€‰, â™»ï¸ ç¾å›½-æ™ºé€‰, â™»ï¸ æ‰€æœ‰-æ™ºé€‰, ğŸ‡­ğŸ‡° é¦™æ¸¯-æ‰‹é€‰, ğŸ‡¹ğŸ‡¼ å°æ¹¾-æ‰‹é€‰, ğŸ‡¯ğŸ‡µ æ—¥æœ¬-æ‰‹é€‰, ğŸ‡ºğŸ‡² ç¾å›½-æ‰‹é€‰, ğŸŒ æ‰€æœ‰-èŠ‚ç‚¹]}

  - {name: ğŸ® Games,<<: *pr}
  - {name: ğŸ¤– ChatAI, <<: *pr}
  - {name: ğŸ‘¨ğŸ¿â€ğŸ’» GitHub, <<: *pr}
  - {name: ğŸ§² PTSite, <<: *pr}
  - {name: ğŸ’¬ Social, <<: *pr}
  - {name: ğŸ¶ TikTok, <<: *pr}
  - {name: ğŸ“º Stream, <<: *pr}
  - {name: ğŸªŸ Microsoft, <<: *pr}
  - {name: â˜ï¸ Cloudflare, <<: *pr}
  - {name: ğŸ›’ å›½å¤–ç”µå•†, <<: *pr}
  - {name: â±ï¸ ç½‘ç»œæ£€æµ‹, <<: *pr}
  - {name: ğŸ’« å…¨çƒç›´è¿, <<: *pr}
  - {name: ğŸŸ æ¼ç½‘ä¹‹é±¼, <<: *pr}
  
# ========================
# æ‰‹é€‰åˆ†ç»„ï¼ˆselectï¼‰
# ========================
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯-æ‰‹é€‰, type: select, include-all: true, filter: "(?=.*(é¦™æ¸¯|HK|Hong Kong|ğŸ‡­ğŸ‡°|HongKong)).*$"}
  - {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾-æ‰‹é€‰, type: select, include-all: true, filter: "(?=.*(å°æ¹¾|å°ç£|TW|Tai Wan|ğŸ‡¹ğŸ‡¼|ğŸ‡¨ğŸ‡³|TaiWan|Taiwan)).*$"}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬-æ‰‹é€‰, type: select, include-all: true, filter: "(?=.*(æ—¥æœ¬|JP|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|ğŸ‡¯ğŸ‡µ|Japan)).*$"}
  - {name: ğŸ‡ºğŸ‡² ç¾å›½-æ‰‹é€‰, type: select, include-all: true, filter: "(?=.*(ç¾|US|çº½çº¦|è¾¾æ‹‰æ–¯|ä¿„å‹’|å‡¤å‡°åŸ|è´¹åˆ©è’™|æ‹‰æ–¯|æ´›æ‰|åœ£ä½•å¡|åœ£å…‹æ‹‰|è¥¿é›…|èŠåŠ |ğŸ‡ºğŸ‡¸|United States)).*$"}
  
# ========================
# æ•…è½¬åˆ†ç»„ï¼ˆfallbackï¼‰
# ========================
  - {name: ğŸ”¯ é¦™æ¸¯-æ•…è½¬, type: fallback, interval: 180, lazy: false, proxies: [ğŸ‡­ğŸ‡° é¦™æ¸¯-æ‰‹é€‰, â™»ï¸ é¦™æ¸¯-æ™ºé€‰]}
  - {name: ğŸ”¯ å°æ¹¾-æ•…è½¬, type: fallback, interval: 180, lazy: false, proxies: [ğŸ‡¹ğŸ‡¼ å°æ¹¾-æ‰‹é€‰, â™»ï¸ å°æ¹¾-æ™ºé€‰]}
  - {name: ğŸ”¯ æ—¥æœ¬-æ•…è½¬, type: fallback, interval: 180, lazy: false, proxies: [ğŸ‡¯ğŸ‡µ æ—¥æœ¬-æ‰‹é€‰, â™»ï¸ æ—¥æœ¬-æ™ºé€‰]}
  - {name: ğŸ”¯ ç¾å›½-æ•…è½¬, type: fallback, interval: 180, lazy: false, proxies: [ğŸ‡ºğŸ‡² ç¾å›½-æ‰‹é€‰, â™»ï¸ ç¾å›½-æ™ºé€‰]}

# ========================
# æ™ºé€‰åˆ†ç»„ï¼ˆsmartï¼‰
# ========================
  - name: â™»ï¸ é¦™æ¸¯-æ™ºé€‰
    type: smart
    include-all: true
    policy-priority: ".*çº¢æ.*:0.8;.*(è´Ÿè½½|è”é€š).*:1.2"
    uselightgbm: true
    collectdata: true
    health-check: 
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 60
      tolerance: 2
    strategy: sticky-sessions
    interval: 180
    filter: "(?=.*(å¹¿æ¸¯|é¦™æ¸¯|HK|Hong Kong|ğŸ‡­ğŸ‡°|HongKong)).*$"
 
  - name: â™»ï¸ å°æ¹¾-æ™ºé€‰
    type: smart
    include-all: true
    policy-priority: ".*çº¢æ.*:0.8;.*(è´Ÿè½½|è”é€š).*:1.2"
    uselightgbm: true
    collectdata: true
    health-check: 
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 60
      tolerance: 2
    strategy: sticky-sessions
    interval: 180
    filter: "(?=.*(å°æ¹¾|å°ç£|TW|Tai Wan|ğŸ‡¹ğŸ‡¼|ğŸ‡¨ğŸ‡³|TaiWan|Taiwan)).*$"

  - name: â™»ï¸ æ—¥æœ¬-æ™ºé€‰
    type: smart
    include-all: true
    policy-priority: ".*çº¢æ.*:0.8;.*(è´Ÿè½½|è”é€š).*:1.2"
    uselightgbm: true
    collectdata: true
    health-check: 
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 60
      tolerance: 2
    strategy: sticky-sessions
    interval: 180
    filter: "(?=.*(æ—¥æœ¬|JP|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|ğŸ‡¯ğŸ‡µ|Japan)).*$"

  - name: â™»ï¸ ç¾å›½-æ™ºé€‰
    type: smart
    include-all: true
    policy-priority: ".*çº¢æ.*:0.8;.*(è´Ÿè½½|è”é€š).*:1.2"
    uselightgbm: true
    collectdata: true
    health-check: 
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 60
      tolerance: 2
    strategy: sticky-sessions
    interval: 180
    filter: "(?=.*(ç¾|US|çº½çº¦|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’|å‡¤å‡°åŸ|è´¹åˆ©è’™|æ‹‰æ–¯|æ´›æ‰|åœ£ä½•å¡|åœ£å…‹æ‹‰|è¥¿é›…|èŠåŠ |ğŸ‡ºğŸ‡¸|United States)).*$"

  - name: â™»ï¸ æ‰€æœ‰-æ™ºé€‰
    type: smart
    include-all: true
    policy-priority: ".*çº¢æ.*:0.8;.*(è´Ÿè½½|è”é€š).*:1.2"
    uselightgbm: true
    collectdata: true
    health-check: 
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 60
      tolerance: 2
    strategy: sticky-sessions
    interval: 180
    filter: "^((?!(ç›´è¿|æ‹’ç»|å‰©ä½™|å¥—é¤)).)*$"

# ========================
# æ‰€æœ‰èŠ‚ç‚¹ï¼ˆallï¼‰
# ========================
  - {name: ğŸŒ æ‰€æœ‰-èŠ‚ç‚¹, type: select, include-all: true, filter: "^((?!(ç›´è¿|æ‹’ç»|å‰©ä½™|å¥—é¤)).)*$"}

# ========================
# è§„åˆ™å¼•æ“ï¼ˆrulesï¼‰
# ========================
rules:
  
  # =======èŠ‚ç‚¹è§„åˆ™é›†=======
  - DOMAIN-SUFFIX,jp,ğŸ”¯ æ—¥æœ¬-æ•…è½¬
  
  # =======ä¼˜å…ˆè§„åˆ™é›†=======
  - GEOIP,private,ğŸ’« å…¨çƒç›´è¿,no-resolve
  - GEOSITE,private,ğŸ’« å…¨çƒç›´è¿
  - GEOSITE,steam@cn,ğŸ’« å…¨çƒç›´è¿
  - GEOSITE,google-cn,ğŸ’« å…¨çƒç›´è¿
  - GEOSITE,microsoft@cn,ğŸ’« å…¨çƒç›´è¿
  - GEOSITE,cloudflare@cn,ğŸ’« å…¨çƒç›´è¿
  - GEOSITE,category-games@cn,ğŸ’« å…¨çƒç›´è¿
  - GEOSITE,category-ecommerce@cn,ğŸ’« å…¨çƒç›´è¿
  - GEOSITE,category-speedtest@cn,ğŸ’« å…¨çƒç›´è¿
  - GEOSITE,category-public-tracker,ğŸ’« å…¨çƒç›´è¿
  - GEOSITE,category-game-platforms-download,ğŸ’« å…¨çƒç›´è¿
  - RULE-SET,Custom_Direct_Domain,ğŸ’« å…¨çƒç›´è¿
  - RULE-SET,Mayfly_Custom_Direct,ğŸ’« å…¨çƒç›´è¿
  - RULE-SET,Custom_Proxy_Domain,ğŸš€ åˆ†ç»„é€‰æ‹©
  - RULE-SET,Mayfly_Custom_Proxy,ğŸš€ åˆ†ç»„é€‰æ‹©
  
  # =======æ¸¸æˆè§„åˆ™é›†=======
  - GEOSITE,steam,ğŸ® Games
  - GEOSITE,category-games,ğŸ® Games
  
  # =======AIè§„åˆ™é›†=======
  - GEOSITE,category-ai-!cn,ğŸ¤– ChatAI
  
  # =======Githubè§„åˆ™é›†=======
  - GEOSITE,github,ğŸ‘¨ğŸ¿â€ğŸ’» GitHub
  
  # =======PTè§„åˆ™é›†=======
  - GEOSITE,category-pt,ğŸ§² PTSite
  
  # =======ç¤¾äº¤è§„åˆ™é›†=======
  - GEOIP,twitter,ğŸ’¬ Social,no-resolve
  - GEOIP,telegram,ğŸ’¬ Social,no-resolve
  - GEOIP,facebook,ğŸ’¬ Social,no-resolve
  - GEOSITE,x,ğŸ’¬ Social
  - GEOSITE,twitter,ğŸ’¬ Social
  - GEOSITE,telegram,ğŸ’¬ Social
  - GEOSITE,category-communication,ğŸ’¬ Social
  - GEOSITE,category-social-media-!cn,ğŸ’¬ Social
  
  # =======TikTokè§„åˆ™é›†=======
  - GEOSITE,tiktok,ğŸ¶ TikTok
  
  # =======å½±éŸ³è§„åˆ™é›†=======
  - GEOIP,netflix,ğŸ“º Stream,no-resolve
  - GEOSITE,okx,ğŸ“º Stream
  - GEOSITE,hbo,ğŸ“º Stream
  - GEOSITE,bybit,ğŸ“º Stream
  - GEOSITE,amazon,ğŸ“º Stream
  - GEOSITE,disney,ğŸ“º Stream
  - GEOSITE,netflix,ğŸ“º Stream
  - GEOSITE,binance,ğŸ“º Stream
  - GEOSITE,youtube,ğŸ“º Stream
  - GEOSITE,spotify,ğŸ“º Stream
  - GEOSITE,category-entertainment,ğŸ“º Stream
  
  # =======å¾®è½¯è§„åˆ™é›†=======
  - GEOSITE,onedrive,ğŸªŸ Microsoft
  - GEOSITE,microsoft,ğŸªŸ Microsoft
  
  # =======Cloudflareè§„åˆ™é›†=======
  - GEOSITE,cloudflare,â˜ï¸ Cloudflare
  
  # =======è´­ç‰©è§„åˆ™é›†=======
  - GEOSITE,category-ecommerce,ğŸ›’ å›½å¤–ç”µå•†
  
  # =======ç½‘ç»œæ£€æµ‹è§„åˆ™é›†=======
  - RULE-SET,Mayfly_Custom_Check,â±ï¸ ç½‘ç»œæ£€æµ‹
  - GEOSITE,category-speedtest,â±ï¸ ç½‘ç»œæ£€æµ‹
  
  # =======å…œåº•è§„åˆ™é›†=======
  - GEOIP,google,ğŸš€ åˆ†ç»„é€‰æ‹©,no-resolve
  - GEOSITE,gfw,ğŸš€ åˆ†ç»„é€‰æ‹©
  - GEOSITE,google,ğŸš€ åˆ†ç»„é€‰æ‹©
  - GEOSITE,geolocation-!cn,ğŸš€ åˆ†ç»„é€‰æ‹©
  - GEOSITE,category-scholar-!cn,ğŸš€ åˆ†ç»„é€‰æ‹©
  - GEOSITE,category-companies,ğŸš€ åˆ†ç»„é€‰æ‹©
  - GEOSITE,cn,ğŸ’« å…¨çƒç›´è¿
  - GEOIP,cn,ğŸ’« å…¨çƒç›´è¿,no-resolve
  - RULE-SET,ChinaMax,ğŸ’« å…¨çƒç›´è¿
  - RULE-SET,China-ASN-combined,ğŸ’« å…¨çƒç›´è¿,no-resolve
  
  # =======å€™è¡¥è§„åˆ™é›†=======
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

# ========================
# è¡¥å……è§„åˆ™é›†
# ========================
rule-anchor:
  ## typeï¼šå¯é€‰http/file/inline  behaviorï¼šå¯é€‰domain/ipcidr/classical formatï¼šå¯é€‰yaml/text/mrs
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}
  yaml: &yaml {type: http, interval: 86400, behavior: classical, format: yaml}

rule-providers:
  
  # ç½‘ç»œæ£€æµ‹
  Mayfly_Custom_Check: {<<: *domain, url: "https://raw.githubusercontent.com/MayflyDestiny/Custom_OpenClash_Rules/refs/heads/main/rule/Custom_Check.mrs"}
  
  # å›½å¤–åŸŸå/IP
  Custom_Proxy_Domain: {<<: *domain, url: "https://raw.githubusercontent.com/Aethersailor/Custom_OpenClash_Rules/refs/heads/main/rule/Custom_Proxy_Domain.mrs"}
  Mayfly_Custom_Proxy: {<<: *domain, url: "https://raw.githubusercontent.com/MayflyDestiny/Custom_OpenClash_Rules/refs/heads/main/rule/Custom_Proxy.mrs"}
  
  # å›½å†…åŸŸå/IP
  ChinaMax: {<<: *class, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/ChinaMax/ChinaMax.list"}
  China-ASN-combined: {<<: *ip, url: "https://raw.githubusercontent.com/qljsyph/ruleset-icon/refs/heads/main/mihomo/ipcidr/China-ASN-combined.mrs"}
  Custom_Direct_Domain: {<<: *domain, url: "https://raw.githubusercontent.com/Aethersailor/Custom_OpenClash_Rules/refs/heads/main/rule/Custom_Direct_Domain.mrs"}
  Mayfly_Custom_Direct: {<<: *domain url: "https://raw.githubusercontent.com/MayflyDestiny/Custom_OpenClash_Rules/refs/heads/main/rule/Custom_Direct.mrs"}